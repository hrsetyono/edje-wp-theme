<?php
  $author_id = get_the_author_meta('ID');
  $tsf = get_the_author_meta('autodescription-user-settings');
?>

<address class="post-author">

  <figure class="author-avatar">
    <?= get_avatar($author_id, '100') ?>
  </figure>

  <div class="author-bio">
    <label>
      <?= __('Written by') ?>
    </label>
    <h5>
      <a
        href="<?= esc_url(get_author_posts_url($author_id)) ?>"
        title="<?= __('See all posts by this author') ?>"
      >
        <?= get_the_author() ?>
      </a>
    </h5>

    <?= H::markdown(get_the_author_meta('description')) ?>
  </div>

  <div class="author-links">

    <?php if (get_the_author_meta('user_url')): ?>
      <a href="<?php the_author_meta('user_url'); ?>" target="_blank">
        <svg xmlns="http://www.w3.org/2000/svg" width="30" height="29" viewBox="0 0 496 512"><path d="M248 8C111 8 0 119 0 256s111 248 248 248 248-111 248-248S385 8 248 8zm179.3 160h-67.2c-6.7-36.5-17.5-68.8-31.2-94.7 42.9 19 77.7 52.7 98.4 94.7zM248 56c18.6 0 48.6 41.2 63.2 112H184.8C199.4 97.2 229.4 56 248 56zM48 256c0-13.7 1.4-27.1 4-40h77.7c-1 13.1-1.7 26.3-1.7 40s.7 26.9 1.7 40H52c-2.6-12.9-4-26.3-4-40zm20.7 88h67.2c6.7 36.5 17.5 68.8 31.2 94.7-42.9-19-77.7-52.7-98.4-94.7zm67.2-176H68.7c20.7-42 55.5-75.7 98.4-94.7-13.7 25.9-24.5 58.2-31.2 94.7zM248 456c-18.6 0-48.6-41.2-63.2-112h126.5c-14.7 70.8-44.7 112-63.3 112zm70.1-160H177.9c-1.1-12.8-1.9-26-1.9-40s.8-27.2 1.9-40h140.3c1.1 12.8 1.9 26 1.9 40s-.9 27.2-2 40zm10.8 142.7c13.7-25.9 24.4-58.2 31.2-94.7h67.2c-20.7 42-55.5 75.7-98.4 94.7zM366.3 296c1-13.1 1.7-26.3 1.7-40s-.7-26.9-1.7-40H444c2.6 12.9 4 26.3 4 40s-1.4 27.1-4 40h-77.7z"/></svg>
        <?php the_author_meta('user_url') ?>
      </a>
    <?php endif; ?>

    <?php if (isset($tsf['facebook_page'])): ?>
      <a href="<?= $tsf['facebook_page'] ?>" target="_blank">
        <svg width="20px" height="20px" viewBox="0 0 20 20">
          <path d="M20,10.1c0-5.5-4.5-10-10-10S0,4.5,0,10.1c0,5,3.7,9.1,8.4,9.9v-7H5.9v-2.9h2.5V7.9C8.4,5.4,9.9,4,12.2,4c1.1,0,2.2,0.2,2.2,0.2v2.5h-1.3c-1.2,0-1.6,0.8-1.6,1.6v1.9h2.8L13.9,13h-2.3v7C16.3,19.2,20,15.1,20,10.1z"/>
        </svg>
      </a>
    <?php endif; ?>

    <?php if (isset($tsf['twitter_page'])): ?>
      <a
        href="https://twitter.com/<?= str_replace('@', '', $tsf['twitter_page']) ?>"
        target="_blank"
      >
        <svg width="20px" height="20px" viewBox="0 0 20 20">
          <path d="M20,3.8c-0.7,0.3-1.5,0.5-2.4,0.6c0.8-0.5,1.5-1.3,1.8-2.3c-0.8,0.5-1.7,0.8-2.6,1c-0.7-0.8-1.8-1.3-3-1.3c-2.3,0-4.1,1.8-4.1,4.1c0,0.3,0,0.6,0.1,0.9C6.4,6.7,3.4,5.1,1.4,2.6C1,3.2,0.8,3.9,0.8,4.7c0,1.4,0.7,2.7,1.8,3.4C2,8.1,1.4,7.9,0.8,7.6c0,0,0,0,0,0.1c0,2,1.4,3.6,3.3,4c-0.3,0.1-0.7,0.1-1.1,0.1c-0.3,0-0.5,0-0.8-0.1c0.5,1.6,2,2.8,3.8,2.8c-1.4,1.1-3.2,1.8-5.1,1.8c-0.3,0-0.7,0-1-0.1c1.8,1.2,4,1.8,6.3,1.8c7.5,0,11.7-6.3,11.7-11.7c0-0.2,0-0.4,0-0.5C18.8,5.3,19.4,4.6,20,3.8z"/>
        </svg>
      </a>
    <?php endif; ?>
  </div>
</address>