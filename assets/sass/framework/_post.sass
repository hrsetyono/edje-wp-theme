$below-related-s: "max-width:870px"

$output-related: true
$output-password-form: false
$output-infinite-scroll: false

// ARCHIVE LAYOUT

.archive-column
  grid-column: span 12

  padding-top: 2rem
  padding-bottom: 2rem
  
  > * + *
    margin-top: 2rem

.archive-column--has-sidebar
  grid-column: span 8


// SINGLE POST LAYOUT

.post-grid--alignfull
  max-width: none
  padding: 0


.post-column
  --postContentOffset: 2rem

  grid-column: span 12
  padding-top: var(--postContentOffset)
  padding-bottom: var(--postContentOffset)

  > * + *
    margin-top: 2rem

.post-column--has-sidebar
  --blogWidth: 100%

  grid-column: span 8

.post-column--no-sidebar
  > * > *
    width: var(--blogWidth)
    max-width: var(--blogWidth)
    margin-right: auto
    margin-left: auto

  //
  @media ($below-s)
    > *
      padding-right: calc(var(--gridGap) / 2)
      padding-left: calc(var(--gridGap) / 2)


///// SIDEBAR

.sidebar
  --sidebarGap: 3rem

  grid-column: span 4
  align-self: flex-start

  display: grid
  grid-template-columns: 1fr
  grid-row-gap: 2rem
  grid-column-gap: 2rem

  padding-top: 2rem

  .widget
    grid-column: span 1
    list-style-type: none

  .widget * + *
    margin-top: 0.5rem

  .widgettitle
    font-size: var(--h4Size)

  //
  @media ($below-m)
    --sidebarGap: 1.5rem

  @media ($below-s)
    order: 1
    grid-column: span 12

    grid-template-columns: repeat(2, minmax(0,1fr))
    padding-top: 0
    margin-bottom: 2rem

  @media ($below-xs)
    grid-template-columns: auto


@media ($above-s)
  .sidebar--left
    order: -1
    padding-right: var(--sidebarGap)

  .sidebar--right
    order: 1
    padding-left: var(--sidebarGap)




///// POST META

.post-meta
  --metaGap: 0.5rem

  display: flex
  flex-wrap: wrap
  align-items: center
  margin-top: 1rem
  
  color: var(--textDim)
  font-size: var(--smallFontSize)

  > *
    display: inline-block
    margin-right: 0.75rem
    margin-bottom: 0.25rem

  > *:last-child
    margin-right: 0

  a
    color: inherit
    text-decoration: none
  a:hover
    text-decoration: underline

  i::before
    width: 1em
    height: 1em
    font-size: 1rem
    vertical-align: middle
    transform: translateY(-2px)

  .post-header &
    padding-top: 0.5rem
    padding-bottom: 0.5rem
    border-top: 1px solid rgba(black, .2)
    border-bottom: 2px solid rgba(black, .2)

  .post-archive &
    &:last-child
      margin-top: auto


.meta-author

.meta-categories,
.meta-tags
  a
    display: inline-block
    padding: 0 0.375rem
    background-color: var(--buttonBg)
    border-radius: var(--gRadius)

    color: var(--buttonColor)

  a:hover
    background-color: var(--buttonBgHover)
    color: var(--buttonColorHover)

  a:active
    transition: none
    transform: translateY(1px)

.meta-categories
  --buttonBg: var(--mainLight)
  --buttonBgHover: var(--mainLight)
  --buttonColor: var(--text)
  --buttonColorHover: var(--text)

  margin-right: 0.25rem
  
  a
    text-transform: uppercase
    letter-spacing: 0.025em

.meta-tags
  --buttonBg: #{ h-rgba(--text, .075) }
  --buttonBgHover: #{ h-rgba(--text, .15) }
  --buttonColor: var(--textDim)
  --buttonColorHover: var(--text)
  


///// PAGINATION

.pagination
  display: flex
  justify-content: center

  color: var(--textDim)
  font-size: var(--smallFontSize)

  a,
  select
    display: flex
    align-items: center
    cursor: pointer

    background-color: transparent
    border: 2px solid var(--textDim)
    border-radius: 0
    width: auto

    color: var(--textDim)
    -webkit-appearance: none
    appearance: none

    &:hover
      background-color: h-rgba(--text, .1)
    &:active
      transition: none
      transform: translateY(1px)

  select
    padding-right: 1rem
    padding-left: 1rem
    font-weight: var(--hFontWeight)
    text-transform: uppercase

  a
    padding-right: 0.25rem
    padding-left: 0.25rem

  a:nth-of-type(1)
    border-right: 0
    border-top-left-radius: var(--gRadius)
    border-bottom-left-radius: var(--gRadius)

  a:nth-of-type(2)
    border-left: 0
    border-top-right-radius: var(--gRadius)
    border-bottom-right-radius: var(--gRadius)


  path
    fill: h-rgba(--textDim, .7)

  // no href
  a:not([href])
    visibility: hidden
    opacity: 0


///// IMAGE FIT - use this in image wrapper

.image-fit
  --fitHeight: 50%

  position: relative
  display: flex
  overflow: hidden

  &::before
    content: ""
    display: block
    width: 100%
    height: 0
    padding-bottom: var(--fitHeight)

  img
    position: absolute
    top: 0
    left: 0
    height: 100%
    width: 100%
    border-radius: 0
    object-fit: cover
    object-position: center center

.image-fit--1\:1
  --fitHeight: 100%
.image-fit--4\:3
  --fitHeight: 75%
.image-fit--16\:9
  --fitHeight: 56.25%
.image-fit--2\:1
  --fitHeight: 50%
.image-fit--3\:1
  --fitHeight: 33.333%